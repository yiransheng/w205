<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta name="generator" content="Madoko, version 0.9.5-beta" />
  <meta name="viewport" content="initial-scale=1.0" />
  <meta name="author" content="Yiran Sheng" />
  <title>Lab 2 Report</title>
  <style  class="link">
  /* ---------------------------------------------------
     Various settings to display madoko elements correctly.
     For example, lines in tables or a table of contents.
  
     All rules use specific madoko classes and never just
     a generic element. This means one can safely include
     this CSS into any web page without affecting non-madoko
     content.
  ----------------------------------------------------*/
  
  /* The table of  contents */
  .madoko .toc>.tocblock .tocblock .tocblock {
    margin-left: 2.5em;
  }
  
  .madoko .toc>.tocblock .tocblock {
    margin-left: 1.7em;
  }
  
  .madoko .toc>.tocblock>.tocitem {
    font-weight: bold;
  }
  
  .madoko .toc {
    margin-top: 1em;
  }
  
  /* Paragraphs */
  .madoko p.para-continue {
    margin-bottom: 0pt;
  }
  
  .madoko .para-block+p {
    margin-top: 0pt;
  }
  
  .madoko ul.para-block, .madoko ol.para-block {
    margin-top: 0pt;
    margin-bottom: 0pt;
  }
  
  .madoko ul.para-end, .madoko ol.para-end {
    margin-bottom: 1em;
  }
  
  .madoko dl {
    margin-left: 0em;
  }
  
  .madoko blockquote {
    font-style: italic;
  }
  
  /* Local page links do not get an underline unless hovering */
  .madoko a.localref {
    text-decoration: none;
  }
  .madoko a.localref:hover {
    text-decoration: underline;
  }
  
  /* Footnotes */
  .madoko .footnotes {
    font-size: smaller;
    margin-top: 2em;
  }
  
  .madoko .footnotes hr {
    width: 50%;
    text-align: left;
  }
  
  .madoko .footnote { 
    margin-left: 1em;
  }
  .madoko .footnote-before {
    margin-left: -1em;
    width: 1em;
    display: inline-block;
  }
  
  /* Abstract */
  .madoko .abstract>p:first-child:before {
    content: "Abstract. ";
    font-weight: bold;
  }
  
  .madoko .abstract {
    margin-left: 2.7em;
    margin-right: 2.7em;
    font-size: small;
  }
  
  
  /* Alignment */
  .madoko .align-center, .madoko .align-center>p {
    text-align: center !important;
  }
  
  .madoko .align-center pre {
    text-align: left;
  }
  
  .madoko .align-center>* {
    margin-left: auto !important;
    margin-right: auto !important;
  }
  
  .madoko .align-left, .madoko .align-left>p {
    text-align: left !important;
  }
  
  .madoko .align-left>* {
    margin-left: 0pt !important;
    margin-right: auto !important;
  }
  
  .madoko .align-right, .madoko .align-right>p {
    text-align: right !important;
  }
  
  .madoko .align-right>* {
    margin-left: auto !important;
    margin-right: 0pt !important;
  }
  
  .madoko .align-center>table,
  .madoko .align-left>table,
  .madoko .align-right>table {
    text-align: left !important;
  }
  
  
  /* Equations, Figure's etc. */
  .madoko .equation-before {
    float: right;
  }
  
  
  /* Bibliography */
  .madoko .bibitem {
    font-size: smaller;
  }
  
  .madoko .bib-numeric .bibitem {
    margin-left: 3em;
    text-indent: -3em;
  }
  
  .madoko .bibitem-before {
    display: none;
  }
  
  .madoko .bib-numeric .bibitem-before {
    display: inline-block;
    width: 3em;
    text-align: right;
  }
  
  .madoko .bibliography {
  }
  
  .madoko .bibsearch {
    font-size: x-small;
    text-decoration:none;
    color: black;
    font-family: "Segoe UI Symbol", Symbola;
  }
  
  /* General */
  .madoko .block, .madoko .figure, .madoko .bibitem, .madoko .equation, .madoko div.math {
    margin-top: 1ex;
    margin-bottom: 1ex;
  }
  
  .madoko .figure {
    padding: 0.5em;
    margin-left: 0pt;
    margin-right: 0pt;
  }
  
  .madoko .hidden {
    display: none;
  }
  
  .madoko .invisible {
    visibility: hidden;
  }
  
  .madoko.preview .invisible {
    visibility: visible;
    opacity: 0.5;
  }
  
  .madoko code.code, .madoko span.code {
    white-space: pre-wrap;
  }
  
  .madoko hr, hr.madoko {
    border: none;
    border-bottom: black solid 1px;
    margin-bottom: 0.5ex;
  }
  
  .madoko .framed>*:first-child {
    margin-top: 0pt;
  }
  .madoko .framed>*:last-child {
    margin-bottom: 0pt;
  }
  
  
  /* Title, authors */
  /*
  .madoko .title {
    font-size: xx-large;
    font-weight: bold;
    margin-bottom: 1ex;
  }
  
  .madoko .subtitle {
    font-size: x-large;
    margin-bottom: 1ex;
    margin-top: -1ex;
  }
  
  .madoko .titleblock>* {
    margin-left: auto;
    margin-right: auto;
    text-align: center;
  }
  
  .madoko .titleblock table {
    width: 80%;
  }
  
  .madoko .authorblock .author {
    font-size: large;
  }
  
  .madoko .titlenote {
    margin-top: -0.5ex;
    margin-bottom: 1.5ex;
  }
  */
  
  /* Lists */
  
  .madoko ul.list-star {
    list-style-type: disc;
  }
  
  .madoko ul.list-dash {
      list-style-type: none !important;
  }
  
  .madoko ul.list-dash > li:before {
      content: "\2013"; 
      position: absolute;
      margin-left: -1em; 
  }
  
  .madoko ul.list-plus {
    list-style-type: square;
  }
  
  /* Tables */
  .madoko table.madoko {
    border-collapse: collapse;
  }
  .madoko td, .madoko th {
    padding: 0ex 0.5ex;
    margin: 0pt;
    vertical-align: top;
  }
  
  .madoko .cell-border-left {
    border-left: 1px solid black;
  }
  .madoko .cell-border-right {
    border-right: 1px solid black;
  }
  
  
  .madoko thead>tr:first-child>.cell-line,
  .madoko tbody:first-child>tr:first-child>.cell-line {
    border-top: 1px solid black;
    border-bottom: none;
  }
  
  .madoko .cell-line, .madoko .cell-double-line {
    border-bottom: 1px solid black;
    border-top: none;
  }
  
  .madoko .cell-double-line {
    border-top: 1px solid black;
    padding-top: 1.5px !important;
  }
  
  
  /* Math Pre */
  .madoko .input-mathpre .MathJax_Display {
    text-align: left !important;
  }
  
  .madoko div.input-mathpre {
    text-align: left;
    margin-top: 1.5ex;
    margin-bottom: 1ex;
  }
  
  .madoko .math-rendering {
    color: gray;
  }
  
  /* Math */
  .madoko .mathdisplay {
    text-align: center;
  }
  
  
  /*---------------------------------------------------------------------------
    Default style for syntax highlighting
  ---------------------------------------------------------------------------*/
  
  .highlighted                        { color: black; }
  .highlighted .token.identifier      { }
  .highlighted .token.operators       { }
  .highlighted .token.keyword         { color: blue }
  .highlighted .token.string          { color: maroon } 
  .highlighted .token.string.escape   { color: gray }
  .highlighted .token.comment         { color: darkgreen }
  .highlighted .token.comment.doc     { font-style: normal }
  .highlighted .token.constant        { color: purple; }
  .highlighted .token.entity          {  }
  .highlighted .token.tag             { color: blue }
  .highlighted .token.info-token      { color: black }
  .highlighted .token.warn-token      { color: black }
  .highlighted .token.error-token     { color: darkred }
  .highlighted .token.debug-token     { color: gray }
  .highlighted .token.regexp          { color: maroon }
  .highlighted .token.attribute.name  { color: navy }
  .highlighted .token.attribute.value { color: maroon }
  .highlighted .token.constructor     { color: purple }
  .highlighted .token.namespace       { color: navy }
  .highlighted .token.header          { color: navy }
  .highlighted .token.type            { color: teal } 
  .highlighted .token.type.delimiter  { color: teal; } 
  .highlighted .token.predefined      { color: navy }
  .highlighted .token.invalid         { border-bottom: red dotted 1px }
  .highlighted .token.code            { color: maroon }
  .highlighted .token.code.keyword    { color: navy }
  .highlighted .token.typevar         { font-style: italic; }
  
  .highlighted .token.delimiter   {  } /* .[curly,square,parenthesis,angle,array,bracket] */
  .highlighted .token.number      {  }    /* .[hex,octal,binary,float] */
  .highlighted .token.variable    {  }  /* .[name,value]  */
  .highlighted .token.meta        { color: navy }      /* .[content] */
  
  .highlighted .token.bold            { font-weight: bold; }
  .highlighted .token.italic          { font-style: italic; }
  
  
  /* Pretty formatting of code */
  .madoko pre.pretty, .madoko code.pretty { 
    font-family: Cambria,Times,Georgia,serif;
    font-size: 100%;
  }
  
  .madoko .pretty table {
    border-collapse: collapse;
  }
  .madoko .pretty td {
    padding: 0em;
  }
  .madoko .pretty td.empty {
    min-width: 1.5ex;
  }
  .madoko .pretty td.expander {
    width: 100em;
  }
  .madoko .pretty .token.identifier         { font-style: italic }
  .madoko .pretty .token.constructor        { font-style: italic }
  
  
  /* ---------------------------------------------------
     Styling for full documents
  ----------------------------------------------------*/
  body.madoko {
    font-family: Cambria,"Times New Roman","Liberation Serif","Times",serif;
    -webkit-text-size-adjust: 100%; /* so math displays well on mobile devices */
  }
  
  body.madoko {
    max-width: 88ex; /* about 88 characters */
    margin: 1em auto;
    padding: 0em 2em;  
  }
  
  body.preview.madoko {
    padding: 0em 1em;
  }
  
  .madoko p,
  .madoko li {
    text-align: justify;
  }
  
  /* style headings nicer, especially h5 and h6 */
  .madoko h1, .madoko h2, .madoko h3, .madoko h4 { 
    margin-top: 1.22em; 
    margin-bottom: 1ex;
  }
  .madoko h1+p, .madoko h2+p, .madoko h3+p, .madoko h4+p, .madoko h5+p  { 
    margin-top: 1ex;    
  }
  .madoko h5, .madoko h6 { 
    margin-top: 1ex;
    font-size: 1em;
  }
  .madoko h5 { 
    margin-bottom: 0.5ex;
  }
  .madoko h5 + p {
    margin-top: 0.5ex;
  }
  .madoko h6 { 
    margin-bottom: 0pt;
  }
  .madoko h6 + p {
    margin-top: 0pt;
  }
  
  
  /* Fix monospace display (see http://code.stephenmorley.org/html-and-css/fixing-browsers-broken-monospace-font-handling/) */
  .madoko pre, .madoko code, .madoko kbd, .madoko samp, .madoko tt, .madoko .monospace, .madoko .token.indent, .madoko .reveal pre, .madoko .reveal code, .madoko .email {
    font-family: Consolas,"Andale Mono WT","Andale Mono",Lucida Console,Monaco,monospace,monospace;
    font-size: 0.85em;
  }
  .madoko pre code, .madoko .token.indent {
    font-size: 0.95em;
  }
  
  .madoko pre code {
    font-family: inherit !important;
  }
  
  /* Code prettify */
  .madoko ol.linenums li {
    background-color: white;
    list-style-type: decimal;
  }
  
  /* Merging */
  .madoko .remote {
    background-color: #F0FFF0;
  }
  .madoko .remote + * {
    margin-top: 0pt;
  }
  
  /* ---------------------------------------------------
     Print settings
  ----------------------------------------------------*/
  
  @media print {
    body.madoko {
      font-size: 10pt;
    }
    @page {
      margin: 1in 1.5in;
    }
  }
  
  /* ---------------------------------------------------
     Mobile device settings
  ----------------------------------------------------*/
  
  @media only screen and (max-device-width:1024px) {
    body.madoko {
      padding: 0em 1em;
    }
  }
  
    </style>
  
  </head>
<body class="madoko">

<div class="body madoko" style="line-adjust:0">

<div class="titleblock align-center para-block" style="line-adjust:0">
<div class="titleheader align-center" style="line-adjust:0">
<div class="title para-block" style="font-size:xx-large;font-weight:bold;margin-bottom:0.5ex;line-adjust:0">Lab 2 Report</div></div>
<div class="authors align-center" style="width:80%;line-adjust:0"><table class="authorrow columns block" style="margin-top:2ex;width:100%;line-adjust:0">
<tbody><tr><td class="author column" style="text-align:center;line-adjust:0">
<div class="authorname" style="font-size:large;line-adjust:0">Yiran Sheng</div>
<div class="authoraddress" style="line-adjust:0">MIDS @ Berkeley</div>
<div class="authoremail email" style="line-adjust:0">yiran@ischool.berkeley.edu</div></td></tr></tbody></table></div></div>
<div class="abstract">
<p data-line="1"><span data-line="1"></span>W205 Lab-2 report, focus on HDFS. </p></div><h2 id="sec-q"   style="bookmark:1.&#8194;Questions"><span class="heading-before"><span class="heading-label">1</span>.&#8194;</span>Questions</h2><h3 id="sec-q1---what-is-the-basic-difference-between-rdbms-and-hadoop"   style="bookmark:1.1.&#8194;Q1 : What is the basic difference between RDBMS and Hadoop?"><span class="heading-before"><span class="heading-label">1.1</span>.&#8194;</span>Q1 : What is the basic difference between RDBMS and Hadoop?</h3>
<p>The fundamental difference is that Hadoop isn&#39;t a database at all.
</p>
<p class="indent">Hadoop/HDFS is a distributed file system, it let a user to store files across multiple nodes (a cloud of machines, virtual or physical),
and handles data redundancy. It&#39;s not a actual FS either, rather provides a FS-like interface for parallel 
computing for processing stored files (such as Map-Reduce). 
</p>
<p class="indent">Unlike RDBMS, where query is executed in realtime, Hadoop supports use cases in the form of batch processing with
higher latency and much large through put. Also, Hadoop/HDFS makes no assumptions about the data it stores, and
does not enforce relations on data like RDBMS does (although Hive does allow SQL-like query interfaces). 
</p>
<p class="indent">RDBMS stores data in a physical file system (typically by rows), and usually stores indices for fast look up, and
 additional statistics of underlying data, and includes additional components such as query optimizer to better
 support realtime query of complex relational data. 
 
Conceptually, Hadoop is very simple and transparent while RDBMS usually have opaque inner workings hard to reason
about from outside. 
</p><h3 id="sec-q2---list-out-the-components-of-hadoop"   style="bookmark:1.2.&#8194;Q2 : List out the components of Hadoop?"><span class="heading-before"><span class="heading-label">1.2</span>.&#8194;</span>Q2 : List out the components of Hadoop?</h3>
<p>The core components for Hadoop are HDFS and Map-Reduce. It also includes related components such as: YARN, Hive, HBase,
and Zookeeper. HDFS is the redundent reliable file storage system, and Map-Reduce is the cluster management and
file processing component. 
 
</p><h3 id="sec-q3---what-are-the-processes-in-hadoop-fw"   style="bookmark:1.3.&#8194;Q3 : What are the processes in Hadoop FW?"><span class="heading-before"><span class="heading-label">1.3</span>.&#8194;</span>Q3 : What are the processes in Hadoop FW?</h3><h3 id="sec-q4---what-kind-of-replication-is-present-for-hdfs"   style="bookmark:1.4.&#8194;Q4 : What kind of replication is present for hdfs?"><span class="heading-before"><span class="heading-label">1.4</span>.&#8194;</span>Q4 : What kind of replication is present for hdfs?</h3>
<p>HDFS stores each file as a sequence of blocks (default size 64 MB); all blocks in a file except the last block are the same size. The blocks of a file are replicated for fault tolerance. The block size and replication factor are configurable per file. Better (newer) hardware can use lower replication factor. 
</p>
<p class="indent">An application can specify the number of replicas of a file. The replication factor can be specified at file creation time and can be changed later. Files in HDFS are immutable.
</p>
<p class="indent">The NameNode makes all decisions regarding replication of blocks. It periodically receives a Heartbeat and a Blockreport from each of the DataNodes in the cluster. Receipt of a Heartbeat implies that the DataNode is functioning properly. A Blockreport contains a list of all blocks on a DataNode.
</p><h3 id="sec-q5---is-hadoop-better-for-datafiles-with-small-size"   style="bookmark:1.5.&#8194;Q5 : Is Hadoop better for datafiles with small size?"><span class="heading-before"><span class="heading-label">1.5</span>.&#8194;</span>Q5 : Is Hadoop better for datafiles with small size?</h3>
<p>No. For files smaller than HDFS block size (default 64MB), each file will occupy one block and results in lots of blocks. Every file, directory and block in HDFS is represented as an object in the namenodeâ€™s memory, each of which occupies 150 bytes, as a rule of thumb. So 10 million files, each using a block, would use about 3 gigabytes of memory. Scaling up much beyond this level is a problem with current hardware. Certainly a billion files is not feasible.
</p>
<p class="indent">Furthermore, HDFS is not geared up to efficiently accessing small files: it is primarily designed for streaming access of large files. Reading through small files normally causes lots of seeks and lots of hopping from datanode to datanode to retrieve each small file, all of which is an inefficient data access pattern.
</p>
<p class="indent">Reference:
</p>
<blockquote>

<p>http://blog.cloudera.com/blog/2009/02/the-small-files-problem/
</p></blockquote><h3 id="sec-q6--since-the-hadoop-command-is-deprecated-what-can-you-use-instead-for-same-result"   style="bookmark:1.6.&#8194;Q6: since the Hadoop command is deprecated, what can you use instead for same result."><span class="heading-before"><span class="heading-label">1.6</span>.&#8194;</span>Q6: since the Hadoop command is deprecated, what can you use instead for same result.</h3>
<p>For hadoop2, <code class="code code1">hadoop1</code> can be used for classic mode which refers to Hadoop 1.x. 
</p>
<p class="indent">For <code class="code code1">hadoop dfs</code>, 
</p>
<pre class="para-block pre-fenced pre-fenced3"><code>hadoop fs</code></pre>
<p>should be used in its place. 
</p><h2 id="sec-hdfs-basic-commands"   style="bookmark:2.&#8194;HDFS basic commands"><span class="heading-before"><span class="heading-label">2</span>.&#8194;</span>HDFS basic commands</h2>
<p>ssh into ami
</p>
<pre class="para-block pre-fenced pre-fenced3"><code>ssh -i MIDS-W205.pem root@ec2-54-237-73-138.compute-1.amazonaws.com</code></pre>
<p>make directory on HDFS:
</p>
<pre class="para-block pre-fenced pre-fenced3"><code>$ hadoop fs -ls /

-rw-------   1 root root       5988 2015-09-02 18:32 .bash_history
-rw-r--r--   1 root root         25 2015-03-17 17:24 .bash_logout
-rw-r--r--   1 root root        199 2015-03-17 17:24 .bash_profile
-rw-r--r--   1 root root         75 2015-03-17 18:32 .bashrc
drwx------   - root root       4096 2015-05-04 03:36 .cache
drwxr-xr-x   - root root       4096 2015-05-04 03:36 .config
drwxr-xr-x   - root root       4096 2015-05-04 03:39 .emacs.d
drwxr-xr-x   - root root       4096 2015-05-04 03:36 .ipython
drwxr-----   - root root       4096 2015-05-04 02:51 .pki
drwxr-xr-x   - root root       4096 2015-05-04 03:36 .python-eggs
-rw-r--r--   1 root root         77 2015-05-04 03:45 .spark_history
drwx------   - root root       4096 2015-09-02 17:45 .ssh
drwxr-xr-x   - root root       4096 2015-05-04 03:31 ipython
drwxr-xr-x   - root root       4096 2015-05-04 03:04 pgxl-deployment-tools
-rw-r--r--   1 root root          0 2015-09-02 18:07 softwares.txt
drwxr-xr-x   - root root       4096 2015-05-04 03:34 streamparse</code></pre>
<pre class="para-block pre-fenced pre-fenced3"><code>$ hadoop fs -mkdir /lab2</code></pre>
<p>add file
</p>
<pre class="para-block pre-fenced pre-fenced3"><code>$ hadoop fs -put /tmp/words /lab2
$ hadoop fs -ls /lab2
Found 1 items
-rw-r--r--   1 root root    3139450 2015-09-14 06:48 /lab2/words.csv</code></pre>
<p>file size of file
</p>
<pre class="para-block pre-fenced pre-fenced3"><code>$ hadoop fs -du /lab2     
$ hadoop fs -du -s /lab2                
3139450  3139450  /lab2/words.csv</code></pre>
<p>remove file
</p>
<pre class="para-block pre-fenced pre-fenced3"><code>$hadoop fs -rm /lab2/words.csv  </code></pre>
<div class="logomadoko block" style="text-align:right;font-size:xx-small;margin-top:4em"><span data-line="1"></span>Created with&nbsp;<a href="https://www.madoko.net">Madoko.net</a>.</div></div><span data-line=""></span>
</body>

</html>
